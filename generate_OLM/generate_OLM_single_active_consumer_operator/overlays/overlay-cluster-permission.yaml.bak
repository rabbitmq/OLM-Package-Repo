#@ load("@ytt:data", "data")
#@ load("@ytt:overlay", "overlay")
#@ clusterserviceversion = overlay.subset({"kind": "ClusterServiceVersion"})
#@ cluster_operator = overlay.subset({"metadata": {"name": "rabbitmq-single-active-consumer-operator.v*"}})
#@overlay/match by=overlay.and_op(clusterserviceversion, cluster_operator),expects="1+"
---
spec:
  install:
    spec:
      clusterPermissions:
        #@overlay/match by=overlay.subset({"serviceAccountName": "single-active-consumer-operator-controller-manager"}),expects="1+"
        -
          #@overlay/match missing_ok=True
          rules:
          - apiGroups:
            - ""
            resources:
            - events
            verbs:
            - create
            - get
            - patch
          - apiGroups:
            - ""
            resources:
            - pods
            verbs:
            - create
            - delete
            - get
            - list
            - patch
            - update
            - watch
          - apiGroups:
            - ""
            resources:
            - services
            verbs:
            - get
            - list
            - watch
          - apiGroups:
            - rabbitmq.com
            resources:
            - superstreamconsumers
            verbs:
            - create
            - delete
            - get
            - list
            - patch
            - update
            - watch
          - apiGroups:
            - rabbitmq.com
            resources:
            - superstreamconsumers/finalizers
            verbs:
            - update
          - apiGroups:
            - rabbitmq.com
            resources:
            - superstreamconsumers/status
            verbs:
            - get
            - patch
            - update
          - apiGroups:
            - rabbitmq.com
            resources:
            - superstreams
            verbs:
            - create
            - delete
            - get
            - list
            - patch
            - update
            - watch
