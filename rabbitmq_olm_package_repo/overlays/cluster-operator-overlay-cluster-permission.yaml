#@ load("@ytt:data", "data")
#@ load("@ytt:overlay", "overlay")
#@ clusterserviceversion = overlay.subset({"kind": "ClusterServiceVersion"})
#@ cluster_operator = overlay.subset({"metadata": {"name": "rabbitmq-cluster-operator.v2.7.0"}})
#@overlay/match by=overlay.and_op(clusterserviceversion, cluster_operator),expects="1+"
---
spec:
  install:
    spec:
      permissions:
        #@overlay/match by=overlay.subset({"serviceAccountName": "rabbitmq-cluster-operator"}),expects="1+"
        -
          #@overlay/match missing_ok=True
          rules:
          - apiGroups:
            - ""
            resources:
            - configmaps
            verbs:
            - create
            - get
            - list
            - update
            - watch
          - apiGroups:
            - ""
            resources:
            - endpoints
            verbs:
            - get
            - list
            - watch
          - apiGroups:
            - ""
            resources:
            - events
            verbs:
            - create
            - get
            - patch
          - apiGroups:
            - ""
            resources:
            - persistentvolumeclaims
            verbs:
            - create
            - get
            - list
            - update
            - watch
          - apiGroups:
            - ""
            resources:
            - pods
            verbs:
            - get
            - list
            - update
            - watch
          - apiGroups:
            - ""
            resources:
            - pods/exec
            verbs:
            - create
          - apiGroups:
            - ""
            resources:
            - secrets
            verbs:
            - create
            - get
            - list
            - update
            - watch
          - apiGroups:
            - ""
            resources:
            - serviceaccounts
            verbs:
            - create
            - get
            - list
            - update
            - watch
          - apiGroups:
            - ""
            resources:
            - services
            verbs:
            - create
            - get
            - list
            - update
            - watch
          - apiGroups:
            - apps
            resources:
            - statefulsets
            verbs:
            - create
            - delete
            - get
            - list
            - update
            - watch
          - apiGroups:
            - rabbitmq.com
            resources:
            - rabbitmqclusters
            verbs:
            - create
            - get
            - list
            - update
            - watch
          - apiGroups:
            - rabbitmq.com
            resources:
            - rabbitmqclusters/finalizers
            verbs:
            - update
          - apiGroups:
            - rabbitmq.com
            resources:
            - rabbitmqclusters/status
            verbs:
            - get
            - update
          - apiGroups:
            - rbac.authorization.k8s.io
            resources:
            - rolebindings
            verbs:
            - create
            - get
            - list
            - update
            - watch
          - apiGroups:
            - rbac.authorization.k8s.io
            resources:
            - roles
            verbs:
            - create
            - get
            - list
            - update
            - watch
